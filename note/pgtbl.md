# 学习笔记

[参考文档](https://www.yuque.com/chengxuyuancarl/gxfm6r/bnhk7s3iwfbe8ysi#HXtaA)

[参考教材](https://pdos.csail.mit.edu/6.S081/2020/xv6/book-riscv-rev1.pdf)

[参考教材的中文翻译](https://geekdaxue.co/read/6.S081-All-in-one/tranlate_books-book-riscv-rev1-c1-s2.md)

[实验内容-题目](https://xv6.dgs.zone/labs/requirements/lab1.html)

[调试技巧](http://xv6.dgs.zone/tranlate_books/Use%20GUN%20Debugger.html)

## 系统调用的基本操作
### 一些常用命令：

- 运行并构建 xv6 操作系统：`make qemu`
- 退出 xv6：`Ctrl-a x`（先按 Ctrl+a，再按 x）
- 测试是否完成 lab：`make grade`
- 测试是否完成 lab 的子任务：`make GRADEFLAGS=<lab name> grade`
  - 如在 util lab 中，想测试是否完成子任务 sleep，运行 `make GRADEFLAGS=sleep grade`
- gdb 调试
  - 一个终端执行 `make CPUS=1 qemu-gdb`
  - 在另一个终端执行 `riscv64-unknown-elf-gdb kernel/kernel`
  - 如果报错 `bash: riscv64-unknown-elf-gdb: command not found` 可参考 [此文](https://blog.csdn.net/csdndogo/article/details/130772956) 解决

### git提交流程
ssh要打开，github的域名要配置
输入username和用户PAT即可进入。
```shell
# This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to /># [network]
# generateHosts = false
127.0.0.1       localhost
127.0.1.1       LAPTOP-BLECCI6K.        LAPTOP-BLECCI6K
140.82.113.3    github.com  # 加在这里

# The following lines are desirable for IPv6 capable hosts
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
```

```shell
ubuntu@LAPTOP-BLECCI6K:~/xv6-labs-2020$ git add .
ubuntu@LAPTOP-BLECCI6K:~/xv6-labs-2020$ git commit -m"find"
[util fd49b2f] find
 2 files changed, 144 insertions(+)
 create mode 100644 user/find.c
ubuntu@LAPTOP-BLECCI6K:~/xv6-labs-2020$ git push origin util
fatal: unable to access 'https://github.com/SuyaZ/OSLab.git/': Failed to connect to github.com port 443: Connection refused
ubuntu@LAPTOP-BLECCI6K:~/xv6-labs-2020$ sudo nano /etc/hosts
[sudo] password for ubuntu: 
ubuntu@LAPTOP-BLECCI6K:~/xv6-labs-2020$ sudo systemctl status ssh
● ssh.service - OpenBSD Secure Shell server
     Loaded: loaded (/lib/systemd/system/ssh.service; disabled; vendor preset: enabled)
     Active: inactive (dead)
       Docs: man:sshd(8)
             man:sshd_config(5)
ubuntu@LAPTOP-BLECCI6K:~/xv6-labs-2020$ sudo systemctl start ssh
ubuntu@LAPTOP-BLECCI6K:~/xv6-labs-2020$ sudo systemctl status ssh
● ssh.service - OpenBSD Secure Shell server
     Loaded: loaded (/lib/systemd/system/ssh.service; disabled; vendor preset: enabled)
     Active: active (running) since Wed 2025-03-26 20:15:39 CST; 2s ago
       Docs: man:sshd(8)
             man:sshd_config(5)
    Process: 31206 ExecStartPre=/usr/sbin/sshd -t (code=exited, status=0/SUCCESS)
   Main PID: 31207 (sshd)
      Tasks: 1 (limit: 9044)
     Memory: 2.6M
     CGroup: /system.slice/ssh.service
             └─31207 sshd: /usr/sbin/sshd -D [listener] 0 of 10-100 startups

ubuntu@LAPTOP-BLECCI6K:~/xv6-labs-2020$ git push origin util
Username for 'https://github.com': SuyaZ     
Password for 'https://SuyaZ@github.com': 
Enumerating objects: 8, done.
Counting objects: 100% (8/8), done.
Delta compression using up to 32 threads
Compressing objects: 100% (5/5), done.
Writing objects: 100% (5/5), 1.82 KiB | 1.82 MiB/s, done.
Total 5 (delta 3), reused 0 (delta 0)
remote: Resolving deltas: 100% (3/3), completed with 3 local objects.
To https://github.com/SuyaZ/OSLab.git
   5e2e955..fd49b2f  util -> util
```